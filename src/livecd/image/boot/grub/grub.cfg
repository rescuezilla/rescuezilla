# Documentation: https://www.gnu.org/software/grub/manual/grub/grub.html
insmod all_video
insmod gfxterm
insmod png

loadfont "unicode"
terminal_output gfxterm

# If this variable is set, it specifies the time in seconds to wait for keyboard input before booting the default menu
# entry. A timeout of ‘0’ means to boot the default entry immediately without displaying the menu; a timeout of ‘-1’ (or
# unset) means to wait indefinitely.
set timeout=10
# This variable may be set to ‘menu’, ‘countdown’, or ‘hidden’ to control the way in which the timeout (see timeout)
# interacts with displaying the menu. 
timeout_style=menu

# If this variable is set, it identifies a menu entry that should be selected by default, possibly after a timeout
# (see timeout). The entry may be identified by number (starting from 0 at each level of the hierarchy), by title, or by id.
set default=0

# If this variable is set, it sets the resolution used on the ‘gfxterm’ graphical terminal. Note that you can only use modes which
# your graphics card supports via VESA BIOS Extensions (VBE), so for example native LCD panel resolutions may not be available. The default
# is ‘auto’, which selects a platform-specific default that should look reasonable. Supported modes can be listed by ‘videoinfo’ command in GRUB.
#
# The resolution may be specified as a sequence of one or more modes, separated by commas (‘,’) or semicolons (‘;’); each will be tried in turn
# until one is found. Each mode should be either ‘auto’, ‘widthxheight’, or ‘widthxheightxdepth’.
set gfxmode=auto

# This variable may be set to a directory containing a GRUB graphical menu theme. 
set theme=/boot/grub/theme/theme.txt

submenu "English" {
    set theme=/boot/grub/theme/theme.txt
    menuentry "Start Rescuezilla" {
        linux  /casper/vmlinuz boot=casper quiet splash fastboot fsck.mode=skip --
        initrd /casper/initrd.lz
        # If boot fails, reboot and try selecting Safe Mode instead
    }

    menuentry "Safe Mode" {
        linux  /casper/vmlinuz boot=casper xforcevesa nomodeset vga=791 toram --
        initrd /casper/initrd.lz
        # Prompts for a video mode and loads the USB image into RAM
    }

    menuentry "Check USB for defects" {
        # The absence of fsck.mode=skip causes md5sum to be checked, to help detect bitrot data corruption
        linux  /casper/vmlinuz boot=casper quiet splash fastboot --
        initrd /casper/initrd.lz
        # Verify integrity of USB drive
    }

    if [ ${grub_platform} == "efi" ]; then
        menuentry "Enter BIOS Setup" {
            fwsetup
            # Configure machine's firmware, boot options etc
        }
    fi
}

submenu "Français" {
    set theme=/boot/grub/theme/theme.txt
    loadfont "unicode"
    menuentry "Démarrer Redo Backup" {
        linux  /casper/vmlinuz boot=casper quiet splash fastboot fsck.mode=skip locale=fr_FR bootkbd=fr console-setup/layoutcode=fr --
        initrd /casper/initrd.lz
        # Si le boot échoue, rebootez et réessayez en selectionnant le mode sans échec à la place
    }

    menuentry "Mode sans échec" {
        linux  /casper/vmlinuz boot=casper xforcevesa nomodeset vga=791 toram locale=fr_FR bootkbd=fr console-setup/layoutcode=fr --
        initrd /casper/initrd.lz
        # Propose un mode vidéo et charge l'image CD en mémoire
    }

    menuentry "Contrôle du CD" {
        # The absence of fsck.mode=skip causes md5sum to be checked, to help detect bitrot data corruption
        linux  /casper/vmlinuz boot=casper quiet splash locale=fr_FR bootkbd=fr console-setup/layoutcode=fr --
        initrd /casper/initrd.lz
        # Vérifie l'intégrité du CD
    }

    if [ ${grub_platform} == "efi" ]; then
        # FIXME: Translate
        menuentry "Enter BIOS Setup" {
            fwsetup
        }
    fi
}

submenu "Deutsch" {
    set theme=/boot/grub/theme/theme.txt
    menuentry "Rescuezilla" {
        linux  /casper/vmlinuz boot=casper quiet splash fastboot fsck.mode=skip locale=de bootkbd=de console-setup/layoutcode=de console-setup/variantcode=nodeadkeys --
        initrd /casper/initrd.lz
        # Startet Rescuezilla. Sollte das Booten hiermit nicht  möglich sein, bitte den Abgesicherten Modus versuchen.
    }

    menuentry "Abgesicherter Modus" {
        linux  /casper/vmlinuz boot=casper noacpi nolapic nomsi xforcevesa nomodeset vga=791 toram locale=de bootkbd=de console-setup/layoutcode=de console-setup/variantcode=nodeadkeys --
        initrd /casper/initrd.lz
        # Versucht das Redo System mit einer Hardware unabhängigeren Konfiguration zu starten.
    }

    menuentry "Contrôle du CD" {
        # The absence of fsck.mode=skip causes md5sum to be checked, to help detect bitrot data corruption
        linux  /casper/vmlinuz boot=casper quiet splash locale=de bootkbd=de console-setup/layoutcode=de console-setup/variantcode=nodeadkeys --
	    initrd /casper/initrd.lz
        # Prüft den Arbeitsspeicher (RAM) auf Fehler
    }

    if [ ${grub_platform} == "efi" ]; then
        # FIXME: Translate
        menuentry "Enter BIOS Setup" {
            fwsetup
        }
    fi
}

submenu "Español" {
    set theme=/boot/grub/theme/theme.txt
    menuentry "Iniciar Rescuezilla" {
        linux  /casper/vmlinuz boot=casper quiet splash fastboot fsck.mode=skip locale=es_ES bootkbd=es console-setup/layoutcode=es --
        initrd /casper/initrd.lz
        # Si el arranque falla, reinicie e intente seleccionando en su lugar el modo a prueba de fallos
    }

    menuentry "Modo seguro" {
        linux  /casper/vmlinuz boot=casper xforcevesa nomodeset vga=791 toram locale=es_ES bootkbd=es console-setup/layoutcode=es --
        initrd /casper/initrd.lz
        # Solicita un modo de vídeo y carga la imagen USB en la RAM
    }

    menuentry "Comprobar si hay defectos en la USB" {
        # The absence of fsck.mode=skip causes md5sum to be checked, to help detect bitrot data corruption
        linux  /casper/vmlinuz boot=casper quiet splash locale=es_ES bootkbd=es console-setup/layoutcode=es --
	    initrd /casper/initrd.lz
        # Compruebe si hay errores en la memoria del computador
    }

    if [ ${grub_platform} == "efi" ]; then
        # FIXME: Translate
        menuentry "Enter BIOS Setup" {
            fwsetup
        }
    fi
}
